CC           = @CC@
#PROF         = --coverage
#PROF         = -pg
CPPFLAGS     = @CPPFLAGS@ -I../include
CFLAGS       = @CFLAGS@ $(PROF) $(CPPFLAGS) # -fPIC
LDFLAGS      = -L../lib @LDFLAGS@ $(PROF)
LDLIBS       = -ldbats @LIBS@
LD_RUN_PATH  = @LD_RUN_PATH@

TARGETS     = report-in report-out dbats_series_limit dbats_info dbats_best_bundle dbats_recover

all: $(TARGETS)

clean:
	/bin/rm -f $(TARGETS) *.o *~

DBATS_LIB = ../lib/libdbats.a

.o:
	env LD_RUN_PATH="$(LD_RUN_PATH)" $(CC) $(CFLAGS) $(LDFLAGS) $< $(LDLIBS) -o $@

report-in.o: report-in.c ../include/dbats.h ../include/dbats_log.h Makefile
report-in: report-in.o $(DBATS_LIB) Makefile

report-out.o: report-out.c ../include/dbats.h ../include/dbats_log.h Makefile
report-out: report-out.o $(DBATS_LIB) Makefile

dbats_series_limit.o: dbats_series_limit.c ../include/dbats.h ../include/dbats_log.h Makefile
dbats_series_limit: dbats_series_limit.o $(DBATS_LIB) Makefile

dbats_info.o: dbats_info.c ../include/dbats.h ../include/dbats_log.h Makefile
dbats_info: dbats_info.o $(DBATS_LIB) Makefile

dbats_best_bundle.o: dbats_best_bundle.c ../include/dbats.h ../include/dbats_log.h Makefile
dbats_best_bundle: dbats_best_bundle.o $(DBATS_LIB) Makefile

dbats_recover.o: dbats_recover.c ../include/dbats.h ../include/dbats_log.h Makefile
dbats_recover: dbats_recover.o $(DBATS_LIB) Makefile

